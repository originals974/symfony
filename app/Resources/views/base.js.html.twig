<script type="text/javascript">           
    $(document).ready(function() {

        //Manage modal windows
        $.fn.modal.defaults.spinner = $.fn.modalmanager.defaults.spinner = 
            '<div class="loading-spinner" style="width: 200px; margin-left: -100px;">' +
                '<div class="progress progress-striped active">' +
                    '<div class="progress-bar" style="width: 100%;"></div>' +
                '</div>' +
            '</div>';

        var modalId = '#ajax-modal'
        var $modal = $(modalId);
 
        $(document).on('click', '[data-toggle=modal]', function(){

            var current, href, defaultModalClass; 

            defaultModalClass = 'modal fade'; 
            current = this;
            href = $(current).attr('href'); 

            //Surchage class attribute of modal div
            if($(current).attr('modal-class') != null){
                $modal.attr('class',$(current).attr('modal-class'));
            }
            else{
                $modal.attr('class', defaultModalClass);
            }

            $('body').modalmanager('loading');
            
            setTimeout(function(){
                $modal.load(href, '', function(){
                    $modal.modal();
                });
            }, 1000);
        });
    });
</script>
